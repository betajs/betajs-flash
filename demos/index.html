<!DOCTYPE html>
<html lang="en">
	<head>
		<script src="assets/jquery-1.9.1.min.js"></script>
		<script src="assets/beta.js"></script>
		<script src="assets/beta-browser.js"></script>
		<script src="outsource.js"></script>
		<script src="../dist/betajs-flash.js"></script>
	</head>
	<body>
		<script>
			var registry = new BetaJS.Flash.FlashClassRegistry();
			registry.register("flash.media.Video", ["attachNetStream"]);
			registry.register("flash.display.Sprite", ["addChild"]);
			registry.register("flash.net.NetStream", ["play"]);
			registry.register("flash.net.NetConnection", ["connect"]);

			$("body").html(BetaJS.Flash.Helper.embedTemplate("../dist/betajs-flash.swf", true));
			var embedding = new BetaJS.Flash.FlashEmbedding($("embed").get(0), {
				registry: registry,
				wrap: true
			});
						
			embedding.ready(function () {
				var main = embedding.flashMain();
				var video = embedding.newObject("flash.media.Video", 500, 500);
				main.addChildVoid(video);
				var connection = embedding.newObject("flash.net.NetConnection");
				connection.addEventListener("netStatus", function () {
					var stream = embedding.newObject("flash.net.NetStream", connection);
					video.attachNetStreamVoid(stream);
					stream.playVoid("abc.flv");
				});
				connection.connectVoid("rtmp://localhost:1935/vodtest/_definst_");
			});
		</script>
	</body>
</html>