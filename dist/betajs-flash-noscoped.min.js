/*!
betajs-flash - v0.0.1 - 2015-04-01
Copyright (c) Oliver Friedmann
MIT Software License.
*/
(function(){var a=this.subScope();a.binding("module","global:BetaJS.Flash"),a.binding("base","global:BetaJS"),a.binding("jquery","global:jQuery"),a.define("module:",function(){return{guid:"3adc016a-e639-4d1a-b4cb-e90cab02bc4f",version:"9.1427938913578",__global:{},options:{flashFile:"betajs-flash.swf"}}}),a.define("module:FlashEmbedding",["base:Class","jquery:","base:Strings","base:Functions","base:Types","base:Objs","base:Ids","base:Async","module:__global","module:FlashObjectWrapper","module:FlashClassWrapper","base:Browser.FlashHelper","module:"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return a.extend({scoped:n},function(a){return{constructor:function(b,c,e){a.constructor.call(this),c=c||{},this.__registry=c.registry,this.__wrap=c.wrap,this.__cache={},this.__callbacks={ready:d.as_method(this.__ready,this)},this.__namespace="BetaJS.Flash.__global."+this.cid(),this.__is_ready=!1,this.__ready_queue=[],this.__wrappers={},this.__staticWrappers={},i[this.cid()]=this.__callbacks,e=f.extend(f.clone(m.options,1),f.extend({FlashVars:{}},e)),e.FlashVars.ready=this.__namespace+".ready",this.__embedding=l.embedFlashObject(b,e)},destroy:function(){delete i[this.cid()],f.iter(this.__wrappers,function(a){a.destroy()}),f.iter(this.__staticWrappers,function(a){a.destroy()}),a.destroy.call(this)},registerCallback:function(a,b){var c="__FLASHCALLBACK__"+g.uniqueId();return this.__callbacks[c]=d.as_method(a,b||this),c},unregisterCallback:function(a){delete this.__callbacks[a]},serialize:function(a){return e.is_array(a)?f.map(a,this.serialize,this):(e.is_function(a)&&(a=this.registerCallback(a)),e.is_string(a)&&c.starts_with(a,"__FLASHCALLBACK__")&&(a=this.__namespace+"."+a),j.is_instance_of(a)&&(a=a.__ident),k.is_instance_of(a)&&(a=a.__type),a)},unserialize:function(a){if(e.is_string(a)&&c.starts_with(a,"__FLASHERR__"))throw c.strip_start(a,"__FLASHERR__");if(e.is_string(a)&&c.starts_with(a,"__FLASHOBJ__")&&this.__wrap){var b=c.strip_start(a,"__FLASHOBJ__");if(b=c.splitFirst(b,"__").head.replace("::","."),"object"!=b.toLowerCase())return a in this.__wrappers||(this.__wrappers[a]=new j(this,a,b)),this.__wrappers[a]}return a},invoke:function(a,b){if(!this.__is_ready)throw"Flash is not ready yet";return b=b||[],this.unserialize(this.__embedding[a].apply(this.__embedding,this.serialize(d.getArguments(b))))},invokeCached:function(a,b){b=b||[];var c=a+"__"+d.getArguments(b).join("__");return c in this.__cache||(this.__cache[c]=this.invoke.call(this,a,b)),this.__cache[c]},getClass:function(a){return this.__wrap?(a in this.__staticWrappers||(this.__staticWrappers[a]=new k(this,a)),this.__staticWrappers[a]):null},newObject:function(){return this.flashCreate.apply(this,arguments)},newCallback:function(){return this.flashCreateCallbackObject.apply(this,arguments)},flashCreateCallbackObject:function(){return this.invoke("create_callback_object",arguments)},flashCreate:function(){return this.invoke("create",arguments)},flashDestroy:function(){return this.invoke("destroy",arguments)},flashCall:function(){return this.invoke("call",arguments)},flashCallVoid:function(){return this.invoke("call_void",arguments)},flashGet:function(){return this.invoke("get",arguments)},flashSet:function(){return this.invoke("set",arguments)},flashStaticCall:function(){return this.invoke("static_call",arguments)},flashStaticCallVoid:function(){return this.invoke("static_call_void",arguments)},flashGetStatic:function(){return this.invoke("get_static",arguments)},flashSetStatic:function(){return this.invoke("set_static",arguments)},flashAddEventListener:function(){return this.invoke("add_event_listener",arguments)},flashMain:function(){return this.invokeCached("main")},__ready:function(){this.__is_ready||(this.__is_ready=!0,h.eventually(function(){f.iter(this.__ready_queue,function(a){a.callback.call(a.context||this)},this)},this))},ready:function(a,b){this.__is_ready?h.eventually(function(){a.call(b||this)},this):this.__ready_queue.push({callback:a,context:b})}}})}),a.define("module:FlashClassRegistry",["base:Class"],function(a,b){return a.extend({scoped:b},{interfaces:{},register:function(a,b,c){this.interfaces[a]={methods:b||{},statics:c||{}}},get:function(a){return this.interfaces[a]}})}),a.define("module:FlashObjectWrapper",["base:Class","base:Objs","base:Functions"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(d,e,f){if(a.constructor.call(this),this.__embedding=d,this.__ident=e,this.__type=f,d.__registry){var g=d.__registry.get(f);g&&b.iter(g.methods,function(a){this[a]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__ident),this.__embedding.flashCall.apply(this.__embedding,b)},this[a+"Void"]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__ident),this.__embedding.flashCallVoid.apply(this.__embedding,b)}},this)}},destroy:function(){this.__embedding.flashDestroy(this.__ident),a.destroy.call(this)},addEventListener:function(a,b){return this.__embedding.flashAddEventListener.call(this.__embedding,this.__ident,a,b)},set:function(a,b){return this.__embedding.flashSet.call(this.__embedding,this.__ident,a,b)},get:function(a){return this.__embedding.flashGet.call(this.__embedding,this.__ident,a)}}})}),a.define("module:FlashClassWrapper",["base:Class","base:Objs","base:Functions"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(d,e){if(a.constructor.call(this),this.__embedding=d,this.__type=e,d.__registry){var f=d.__registry.get(e);f&&b.iter(f.statics,function(a){this[a]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__type),this.__embedding.flashStaticCall.apply(this.__embedding,b)},this[a+"Void"]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__type),this.__embedding.flashStaticCallVoid.apply(this.__embedding,b)}},this)}},set:function(a,b){return this.__embedding.flashSetStatic.call(this.__embedding,this.__type,a,b)},get:function(a){return this.__embedding.flashGetStatic.call(this.__embedding,this.__type,a)}}})})}).call(Scoped);